

function chsh_zsh() {
	if [[ "$SHELL" != "$(zsh_binary)" ]]; then
		dotsay "@b@blue[[Changing shell for $current_user...]]"

		local current_user=$USER
		sudo chsh -s $(zsh_binary) $current_user
	fi
}
setup_hostname() {
	print_header "Set computer hostname"

	if [[ $(scutil --get HostName 2>/dev/null) == "" ]]; then
		ask "Please enter a hostname: "
		local new_hostname=$(get_answer)

		sudo scutil --set ComputerName "$new_hostname"
		sudo scutil --set LocalHostName "$new_hostname"
		sudo scutil --set HostName "$new_hostname"

		dscacheutil -flushcache

		print_success "Set hostname to $new_hostname"
	else
		print_success "Already set hostname to $(hostname)!"
	fi
}


########## SCRIPT START ##############
chsh_zsh
setup_hostname

	echo "Replacing local bin with dotfiles bin..."
	ln -s ~/dot/bin ~/.local/bin

# Run before the main Brewfile install
	if test ! $(which brew); then
		echo "Installing Homebrew..."
		/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
		(
			echo
			echo 'eval "$(/opt/homebrew/bin/brew shellenv)"'
		) >>/Users/s1/.zprofile
		eval "$(/opt/homebrew/bin/brew shellenv)"
		brew update
		brew install git
	fi
}


# SSH keys

# Generate SSH key as osx package list is in a shared private repo

# -C -> comment
ssh-keygen -t rsa -b 4096 -C "freddiehill000@gmail.com"
